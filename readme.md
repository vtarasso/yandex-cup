H. Вселенский ужас (60 баллов)
Малоизвестный скульптор Огюст Мур отправился на Деймос — один из ближайших спутников Марса, чтобы набрать каменистой породы для создания своей новый работы «Ужас». Однако миссия Огюста терпит крах. Его марсоход застревает на поверхности спутника, так что он чувствует тот самый вселенский ужас, который хотел передать в своей работе.

Огюст понимает, что его единственный шанс спастись — отправить сигнал бедствия с помощью нескольких архаичных зондов, обнаруженных неподалёку, чтобы они дальше передали сигнал на Марс. Каждый зонд обладает только световым прибором, с помощью которого необходимо закодировать полноценное сообщение в Азбуку Морзе.

Подключившись к одному из зондов, Огюст обнаружил интерфейс управления, состоящий всего лишь из одного файла. На каждом зонде есть роботизированная рука, с помощью которой можно с ним взаимодействовать. Световые приборы управляются с помощью рычагов. Чтобы включить передатчик, роборуке нужно подвинуть рычаг вперёд и вниз одновременно, чтобы выключить — назад и вверх одновременно. Так как оборудование достаточно старое, нужно быть уверенным, что переключатель всегда находится в роборуке, поэтому после каждого слова в сообщении нужно отпускать его и брать заново. После проигрывания сообщения полностью нужно сбросить роборуку в исходное положение.

Если на передатчике что-то пошло не так, нужно заново воспроизвести на нем слово, в момент воспроизведения которого что-то сломалось.

Чтобы повысить свои шансы на выживание, Огюст решил передавать сообщения на все передатчики по следующему принципу: проигрываем на первом свободном, а если все заняты передачей сообщения, то ждем первый освободившийся и проигрываем на нём.

На вход в обработчик будут приходить сообщения, состоящие только из слов на английском языке и пробелов, без знаков препинания и прочих символов.

Вам необходимо реализовать функцию, которая первым аргументом будет получать Websocket, вторым аргументом — массив из передатчиков, третьим — настройки для пауз при передаче через Азбуку Морзе:
Короткий сигнал — включение на 0.5 сек.
Длинный сигнал — включение на 1 сек.
Пауза между словами — 2 сек.
Пауза между символами азбуки морзе — 0.2 сек.

В onmessage вебсокета будут приходить сообщения, которые нужно воспроизвести на передатчиках с помощью API роботизированных рук.

Для тестирования решения скачивайте приложенный файл universal_horror.zip (ссылка "Скачать условие задачи" ниже), в файле src/solution.js можно писать решение и визуализировать состояние передатчиков.

В ответ необходимо отправить содержимое файла solution.js.